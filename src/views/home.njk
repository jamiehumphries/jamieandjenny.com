{% extends "layout.njk" %}

{% set isHome = true %}
{% set title = "Jamie and Jennyâ€™s Wedding" %}

{% block content %}
  {% if user.names %}
    <p>
      Hello {{ user.names }}!
    </p>
  {% endif %}
  {% set dayOrDays = "day" if (daysToGo | abs) === 1 else "days" %}
  {% if daysToGo < 0 or isStatic %}
    <p>
      Weâ€™ve been married for <span id="days-married">{{ -daysToGo }}</span> {{ dayOrDays }}!
    </p>
    {% if isStatic %}
      <script>
        const oneDayMs = 24 * 60 * 60 * 1000;
        const daysMarried = Math.floor((new Date() - new Date("2022-10-01")) / oneDayMs);
        document.getElementById("days-married").innerText = daysMarried;
      </script>
    {% endif %}
    <p>
      It was wonderful to celebrate with you.
    </p>
  {% elif daysToGo > 0 %}
    <p>
      Only {{ daysToGo }} {{ dayOrDays }} to go until the wedding!
    </p>
    <p>
      Weâ€™re looking forward to celebrating with you.
    </p>
  {% elif daysToGo === 0 %}
    <p>
      Todayâ€™s the day! ðŸ¤µðŸ‘°
    </p>
  {% endif %}
  <p>
    Love,
    <img class="signature" src="/images/signature.png" alt="Jamie & Jenny xxx">
  </p>
  {% if not isStatic %}
    <a href="/information" class="button-link">
      Information
    </a>
    <a href="/rsvp" class="button-link">
      R.S.V.P.
    </a>
  {% endif %}
  <img class="main-image" src="/images/main/{{ user.image if user else 'wedding.jpg' }}" alt="Jamie and Jenny">
{% endblock %}
